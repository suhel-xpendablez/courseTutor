<!DOCTYPE html>
<html>
<head>
<style>
button.accordion {
  background-color: #eee;
  color: #444;
  cursor: pointer;
  padding: 18px;
  width: 100%;
  border: none;
  text-align: left;
  outline: none;
  font-size: 15px;
  transition: 0.4s;
}

button.accordion.active, button.accordion:hover {
  background-color: #ddd;
}

div.panel {
  padding: 0 18px;
  display: none;
  background-color: white;
}

div.panel.show {
  display: block;
}
</style>
</head>
<body>

  <h2>Accordion</h2>
  <div id="mainDiv">

  </div>

</body>
<script type="text/javascript">
var model = [{name:'Section 1',content:'Lorem ipsum dolor sit amet'},{name:'Section 2',content:'Lorem ipsum dolor sit amet'},{name:'Section 3',content:'Lorem ipsum dolor sit amet'}];
var mainDiv = document.getElementById('mainDiv');
//var acc = document.getElementsByClassName("accordion");
function setAccordian(){
  for (var i = 0; i < model.length; i++) {
    var elem = document.createElement('button');
    elem.setAttribute("class", "accordion");
    var div = document.createElement('div');
    var pTag = document.createElement('p');
    div.setAttribute("class", "panel");

    elem.innerHTML = model[i].name;
    pTag.innerHTML = model[i].content;
    div.append(pTag);
    mainDiv.append(elem);
    mainDiv.append(div);
    elem.addEventListener('click', (function(i){
      return function(){
        var panel = document.getElementsByClassName("panel");
        if(panel[i].style.display == 'block'){
          panel[i].style.display = 'none';
        }else {
          panel[i].style.display = 'block';
        }
      }
    })(i));
  }
}
setAccordian();

</script>
</html>
<!-- var acc = document.getElementsByClassName("accordion");
var i;

for (i = 0; i < acc.length; i++) {
    acc[i].onclick = function(){
        this.classList.toggle("active");
        this.nextElementSibling.classList.toggle("show"); -->
